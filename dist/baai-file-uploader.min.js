/**
 * baai-file-uploader v1.0.0
 * (c) 2019 baaifrontend
 * @license MIT
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.BaaiFileUploader=e()}(this,function(){"use strict";function t(t){var r=t.file,n=t.bucket,o=t.uploadUrl,a=t.xhr,u=new FormData,i=-1===o.indexOf("?")?"?":"&";return u.append("file",r),e({method:"POST",url:""+o+i+"bucket="+n,data:u,xhr:a})}function e(t){var e=t.xhr,r=t.method,n=t.url,o=t.data;return new Promise(function(t,a){e.open(r,n,!0),e.responseType="json",e.onreadystatechange=function(){if(4===e.readyState)if(200===e.status){var r=e.response;t("string"==typeof r?JSON.parse(r):r)}else a(new Error(e.statusText))},e.onerror=function(){a(new Error(e.statusText))},e.send(o)})}function r(t){return a(new Error("upload aborted"),{aborted:!0,reason:t})}var n=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},u=function(){function e(t,r){var o=r.bucket,a=r.uploadUrl;n(this,e),this.file=t,this.bucket=o,this.uploadUrl=a,this.uploadXhr=new XMLHttpRequest,this.abortError=null}return o(e,[{key:"start",value:function(){var e=this;return t({file:this.file,bucket:this.bucket,uploadUrl:this.uploadUrl,xhr:this.uploadXhr}).then(function(t){return t.d.url.https}).catch(function(t){return Promise.reject(e.abortError||t)})}},{key:"abort",value:function(t){this.abortError=r(t),this.uploadXhr.abort()}}]),e}(),i={bucket:"",uploadUrl:"https://cdn.hub.baai.ac.cn/v1/upload"};return function(){function t(e){n(this,t),this.config=a(i,e)}return o(t,[{key:"createTask",value:function(t){return new u(t,this.config)}}]),t}()});
